<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Whack-a-Mole!</title>
<style>
  :root {
    --bg:#0f172a; --card:#111827; --text:#e5e7eb; --accent:#22d3ee; --muted:#94a3b8;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial;
    background: radial-gradient(1000px 600px at 50% -200px, #1f2937, #0b1220) fixed, var(--bg);
    color:var(--text); min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
  }
  .wrap{
    width:100%; max-width:720px; background:linear-gradient(180deg, #0f172a 0%, #0b1220 100%);
    border:1px solid #1f2937; border-radius:20px; box-shadow:0 20px 60px rgba(0,0,0,.35); overflow:hidden;
  }
  header{
    padding:18px 20px; display:flex; align-items:center; justify-content:space-between; gap:12px;
    border-bottom:1px solid #1f2937; background:rgba(34,211,238,.06);
  }
  header h1{margin:0; font-size:18px; letter-spacing:.4px}
  .controls{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
  button{
    background:var(--accent); color:#051923; border:none; border-radius:10px; padding:10px 14px; font-weight:700;
    cursor:pointer; transition:transform .05s ease, box-shadow .2s ease; box-shadow:0 4px 16px rgba(34,211,238,.25);
  }
  button:active{transform:translateY(1px)}
  button.secondary{background:#1f2937; color:var(--text); box-shadow:none; border:1px solid #273247}
  main{padding:20px}
  .stats{
    display:grid; grid-template-columns:repeat(4,1fr); gap:12px; margin-bottom:16px;
  }
  .stat{
    background:#0c1626; border:1px solid #16233a; border-radius:12px; padding:10px 12px; text-align:center;
  }
  .stat .label{font-size:12px; color:var(--muted)}
  .stat .value{font-size:20px; font-weight:800; margin-top:4px}
  .difficulty{
    grid-column:1 / -1; display:flex; align-items:center; gap:10px; background:#0c1626; border:1px solid #16233a; 
    border-radius:12px; padding:10px 12px;
  }
  .difficulty input{width:100%}
  .grid{
    aspect-ratio:1/1; width:100%; max-width:560px; margin:16px auto 8px;
    display:grid; grid-template-columns:repeat(3,1fr); gap:12px;
  }
  .hole{
    position:relative; background:linear-gradient(180deg, #0b1324, #0a1220); border:1px solid #1a2744;
    border-radius:16px; overflow:hidden; display:flex; align-items:center; justify-content:center;
    box-shadow: inset 0 8px 24px rgba(0,0,0,.45);
    user-select:none; -webkit-tap-highlight-color:transparent;
  }
  .mole{
    position:absolute; width:68%; aspect-ratio:1/1; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, #34d399 0%, #22d3ee 35%, #0ea5e9 70%, #2563eb 100%);
    box-shadow: 0 12px 28px rgba(34,211,238,.35), inset 0 4px 8px rgba(255,255,255,.18);
    transform:translateY(40%); animation:pop .18s ease-out forwards;
  }
  .mole:after{
    content:""; position:absolute; inset:12%; border-radius:50%;
    background: radial-gradient(circle at 35% 35%, rgba(255,255,255,.25), rgba(255,255,255,0) 60%);
  }
  @keyframes pop { to{ transform:translateY(0);} }
  .footer{
    text-align:center; color:var(--muted); font-size:12px; padding:8px 0 18px;
  }
  @media (max-width:560px){
    .stats{grid-template-columns:repeat(2,1fr)}
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ðŸŽ¯ Whack-a-Mole</h1>
      <div class="controls">
        <button id="startBtn">Start</button>
        <button id="stopBtn" class="secondary">Stop</button>
        <button id="resetBtn" class="secondary">Reset</button>
      </div>
    </header>

    <main>
      <div class="stats">
        <div class="stat"><div class="label">Time</div><div id="time" class="value">30</div></div>
        <div class="stat"><div class="label">Score</div><div id="score" class="value">0</div></div>
        <div class="stat"><div class="label">Best</div><div id="best" class="value">0</div></div>
        <div class="stat"><div class="label">Speed (harder â†’)</div><div id="speedLabel" class="value">5</div></div>
        <div class="difficulty">
          <input id="speed" type="range" min="1" max="10" value="5" />
        </div>
      </div>

      <div class="grid" id="grid">
        <div class="hole" data-i="0"></div>
        <div class="hole" data-i="1"></div>
        <div class="hole" data-i="2"></div>
        <div class="hole" data-i="3"></div>
        <div class="hole" data-i="4"></div>
        <div class="hole" data-i="5"></div>
        <div class="hole" data-i="6"></div>
        <div class="hole" data-i="7"></div>
        <div class="hole" data-i="8"></div>
      </div>

      <div class="footer">Tap/click the glowing orb as fast as you can before time runs out!</div>
    </main>
  </div>

<script>
  // ----- Elements
  const grid = document.getElementById('grid');
  const holes = Array.from(document.querySelectorAll('.hole'));
  const timeEl = document.getElementById('time');
  const scoreEl = document.getElementById('score');
  const bestEl  = document.getElementById('best');
  const speedSlider = document.getElementById('speed');
  const speedLabel  = document.getElementById('speedLabel');
  const startBtn = document.getElementById('startBtn');
  const stopBtn  = document.getElementById('stopBtn');
  const resetBtn = document.getElementById('resetBtn');

  // ----- State
  let playing = false;
  let currentIndex = -1;
  let moveTimer = null;
  let countdown = null;
  let timeLeft = 30;
  let score = 0;
  let best = Number(localStorage.getItem('wam-best') || 0);
  bestEl.textContent = best;

  // Map difficulty (1..10) â†’ interval ms (slowâ†’fast)
  const intervalFromSpeed = s => Math.max(250, 1200 - s * 90);

  speedSlider.addEventListener('input', () => {
    speedLabel.textContent = speedSlider.value;
    if (playing) {
      clearInterval(moveTimer);
      moveTimer = setInterval(spawnMole, intervalFromSpeed(Number(speedSlider.value)));
    }
  });

  // ----- Game flow
  function startGame(){
    if (playing) return;
    playing = true;
    score = 0; timeLeft = 30;
    updateUI();
    startBtn.disabled = true;

    // start timers
    moveTimer = setInterval(spawnMole, intervalFromSpeed(Number(speedSlider.value)));
    spawnMole();
    countdown = setInterval(() => {
      timeLeft--;
      timeEl.textContent = timeLeft;
      if (timeLeft <= 0) endGame();
    }, 1000);
  }

  function endGame(){
    if (!playing) return;
    playing = false;
    clearInterval(moveTimer); moveTimer = null;
    clearInterval(countdown); countdown = null;
    clearMole();
    startBtn.disabled = false;

    if (score > best) {
      best = score;
      localStorage.setItem('wam-best', String(best));
      bestEl.textContent = best;
    }
  }

  function resetGame(){
    endGame();
    score = 0; timeLeft = 30;
    updateUI();
  }

  function updateUI(){
    scoreEl.textContent = score;
    timeEl.textContent  = timeLeft;
    speedLabel.textContent = speedSlider.value;
  }

  // ----- Mole logic
  function spawnMole(){
    clearMole();
    // Choose a hole index different from previous to keep it lively
    let idx;
    do { idx = Math.floor(Math.random() * holes.length); } while (idx === currentIndex && holes.length > 1);
    currentIndex = idx;

    const hole = holes[idx];
    const mole = document.createElement('div');
    mole.className = 'mole';
    mole.setAttribute('aria-label','mole');
    mole.role = 'button';
    hole.appendChild(mole);
  }

  function clearMole(){
    const prev = document.querySelector('.mole');
    if (prev && prev.parentElement) prev.parentElement.removeChild(prev);
  }

  // ----- Interactions
  grid.addEventListener('click', (e) => {
    if (!playing) return;
    const mole = e.target.closest('.mole');
    if (mole) {
      score++;
      scoreEl.textContent = score;
      clearMole();               // prevent multi-click farming
      currentIndex = -1;
    }
  }, { passive:true });

  startBtn.addEventListener('click', startGame);
  stopBtn.addEventListener('click', endGame);
  resetBtn.addEventListener('click', resetGame);

  // Keyboard support: Space to start/pause, R to reset
  window.addEventListener('keydown', (e)=>{
    if (e.code === 'Space') { e.preventDefault(); playing ? endGame() : startGame(); }
    if (e.key.toLowerCase() === 'r') resetGame();
  });
</script>
</body>
</html>
